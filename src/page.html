<!DOCTYPE html>
<html>
    <head>
        <title>Canvas Test</title>
    </head>
    <body >
        <script>
        var canvas = document.createElement('canvas');
        document.body.appendChild(canvas);
        document.addEventListener('contextmenu', event => event.preventDefault());
        

        document.body.style.margin = 0;
        var ctx = canvas.getContext('2d');
        var pos = { x: 0, y: 0 };

        canvas.oncontextmenu = function (e) {
            e.preventDefault();
        };

        resize();

        window.addEventListener('resize', resize);
        document.addEventListener('mousemove', setPosition);
        document.addEventListener('mousedown', setPosition);
        document.addEventListener('mouseup', setPosition);
        document.addEventListener('mouseenter', setPosition);
        
        // Touch event listeners
        document.addEventListener('touchstart', setPosition);
        document.addEventListener('touchmove', setPosition);
        document.addEventListener('touchend', setPosition);

        // new position from mouse/touch event
        function setPosition(e) {
            if (e.touches) {
                pos.x = e.touches[0].clientX;
                pos.y = e.touches[0].clientY;
                e.buttons = 330;
            } else {
                pos.x = e.clientX;
                pos.y = e.clientY;
            }
            var fbody = "X:\t" + (pos.x * 1920) / ctx.canvas.width  + "\n" +
               "Y:\t" + (pos.y * 1080) / ctx.canvas.height + "\n" +
               "Buttons:\t" + e.buttons + "\n" +
               "Status:\tOK\0";
            fetch(window.location.host+":"+window.location.port, {
                method: "post",
                headers: {},
                body: fbody,
            });
        }

        // resize canvas
        function resize() {
            ctx.canvas.width = window.innerWidth;
            ctx.canvas.height = window.innerHeight;
        }

        </script>
    </body>
</html>

